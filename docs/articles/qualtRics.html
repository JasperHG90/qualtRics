<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>qualtRics • qualtRics</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="qualtRics">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">qualtRics</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/qualtRics.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>qualtRics</h1>
                        <h4 class="author">Jasper Ginn</h4>
            
            <h4 class="date">2018-05-18</h4>
      
      
      <div class="hidden name"><code>qualtRics.Rmd</code></div>

    </div>

    
    
<p>This project contains an R package to download surveys from <a href="https://www.qualtrics.com/">Qualtrics</a> using the API.</p>
<p>Note that your institution must support API access and that it must be enabled for your account. Whoever manages your Qualtrics account can help you with this. Please refer to the <a href="https://api.qualtrics.com/docs/authentication">Qualtrics documentation</a> to find your API token.</p>
<p>I am not affiliated with Qualtrics and they do not offer support for this package.</p>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Currently, the package contains three core functions:</p>
<ol style="list-style-type: decimal">
<li>
<em>getSurveys()</em> fetches a list of all surveys that you own or have access to from Qualtrics.</li>
<li>
<em>getSurvey()</em> downloads a survey from Qualtrics and loads it into R.</li>
<li>
<em>readSurvey()</em> allows you to read CSV files you download manually from Qualtrics.</li>
</ol>
<p>It further contains four helper functions:</p>
<ol style="list-style-type: decimal">
<li>
<em>registerOptions()</em> stores your API key and root url in environment variables.</li>
<li>
<em>getSurveyQuestions()</em> retrieves a data frame containing questions and question IDs for a survey.</li>
<li>
<em>qualtRicsConfigFile()</em> prints information on how to make a .qualtRics.yml configuration file that stores your qualtRics API key, root url and other options in your working directory.</li>
<li>
<em>metadata()</em> retrieves metadata about your survey, such as questions, survey flow, number of responses etc.</li>
</ol>
<p>Note that you can only export surveys that you own, or to which you have been given administration rights.</p>
</div>
<div id="registering-your-qualtrics-credentials" class="section level2">
<h2 class="hasAnchor">
<a href="#registering-your-qualtrics-credentials" class="anchor"></a>Registering your Qualtrics credentials</h2>
<p>There are two ways to register your Qualtrics credentials (your <a href="https://api.qualtrics.com/docs/finding-qualtrics-ids">API key</a> and <a href="https://api.qualtrics.com/docs/root-url">institution-specific root url</a>) and other options in R. As in earlier versions of the qualtRics package, you can register your credentials at the start of each R session:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/qualtrics_register_options.html">registerOptions</a></span>(<span class="dt">api_token=</span><span class="st">"&lt;YOUR-API-TOKEN&gt;"</span>, <span class="dt">root_url=</span><span class="st">"&lt;YOUR-ROOT-URL&gt;"</span>)</code></pre></div>
<p>You can set some global options via the <code><a href="../reference/qualtrics_register_options.html">registerOptions()</a></code> function:</p>
<ol style="list-style-type: decimal">
<li>
<strong>verbose:</strong> Logical. If TRUE, verbose messages will be printed to the R console. Defaults to TRUE.</li>
<li>
<a href="https://api.qualtrics.com/docs/create-response-export">useLabels</a>: Logical. TRUE to export survey responses as Choice Text or FALSE to export survey responses as values.</li>
<li>
<strong>convertvariables:</strong> Logical. If TRUE, then the function will convert certain question types (e.g. multiple choice) to proper data type in R. Defaults to TRUE. (see <a href="#automatic-conversion-of-variables">below</a> for more information)</li>
<li>
<a href="https://api.qualtrics.com/docs/dates-and-times">useLocalTime</a>: Logical. Use local timezone to determine response date values? Defaults to FALSE.</li>
<li>
<strong>dateWarning:</strong> Logical. Once per session, qualtRics will emit a warning about date conversion for surveys. You can turn this warning off by changing the flag to FALSE. Defaults to TRUE.</li>
</ol>
<p>You can change some of these options without having to pass the <code>api_token</code> or <code>root_url</code> parameters every time as long as you have registered the api token and root url previously:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/qualtrics_register_options.html">registerOptions</a></span>(<span class="dt">verbose=</span><span class="ot">FALSE</span>, <span class="dt">useLocalTime=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>The second method involves placing a configuration file called <code>.qualtRics.yml</code> in your working directory.</p>
<div id="using-a-configuration-file" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-configuration-file" class="anchor"></a>Using a configuration file</h3>
<p>qualtRics supports the use of a configuration file to store your Qualtrics credentials. Executing <code><a href="../reference/qualtrics_config_file.html">qualtRicsConfigFile()</a></code> returns information that explains how you can do this:</p>
<pre><code>Copy-paste the lines between the dashes into a new plain text file, replace the values for the
api_token and root_url if they are not yet filled out. and save it in your working directory 
as '.qualtRics.yml'. Execute '?qualtRics::qualtRicsConfigFile' to view an explanation of the additional arguments. Visit https://github.com/ropensci/qualtRics/blob/master/README.md#using-a-configuration-file 
for more information.

--------------
api_token: &lt;YOUR-API-TOKEN-HERE&gt;
root_url: &lt;YOUR-ROOT-URL-HERE&gt;
verbose: TRUE
uselabels: TRUE
convertvariables: TRUE
uselocaltime: FALSE
datewarning: TRUE
--------------</code></pre>
<p>You can also call this function while passing <code>api_token</code> and <code>root_url</code> values to the function, in which case <code>&lt;YOUR-API-TOKEN-HERE&gt;</code> and <code>&lt;YOUR-ROOT-URL-HERE&gt;</code> will be replaced by your credentials. After saving the file, you can register your credentials by calling <code><a href="../reference/qualtrics_register_options.html">registerOptions()</a></code> without passing any parameters.</p>
<p>When you load the qualtRics package, it will automatically look for a <code>.qualtRics.yml</code> file in the working directory, in which case you don’t need to call the <code><a href="../reference/qualtrics_register_options.html">registerOptions()</a></code> function to register your qualtRics credentials at the beginning of your session.</p>
<p>You can override your configuration file settings by calling <code><a href="../reference/qualtrics_register_options.html">registerOptions()</a></code> with the changes you want to make:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/qualtrics_register_options.html">registerOptions</a></span>(<span class="dt">verbose=</span><span class="ot">FALSE</span>, <span class="dt">useLabels=</span><span class="ot">FALSE</span>, <span class="dt">root_url=</span><span class="st">"myinstitution.qualtrics.com"</span>)</code></pre></div>
<div id="setting-up-a-config-file" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-up-a-config-file" class="anchor"></a>Setting up a config file</h4>
<p>Open an existing R project or start a new one. Then, open up an empty text file:</p>
<p><img src="https://raw.githubusercontent.com/ropensci/qualtRics/master/img/config_step1.png" width="80%"></p>
<p>Execute <code><a href="../reference/qualtrics_config_file.html">qualtRicsConfigFile(api_token="&lt;YOUR-API-TOKEN-HERE&gt;", root_url="&lt;YOUR-ROOT-URL-HERE&gt;")</a></code> and copy-paste the text between the dashes to the empty text file:</p>
<p><img src="https://raw.githubusercontent.com/ropensci/qualtRics/master/img/config_step2.png" width="80%"></p>
<p>Save the file as <code>.qualtRics.yml</code> and execute <code><a href="../reference/qualtrics_register_options.html">registerOptions()</a></code> or restart your R session and execute <code>library(qualtRics)</code> to load the configuration file.</p>
</div>
</div>
</div>
<div id="commands" class="section level2">
<h2 class="hasAnchor">
<a href="#commands" class="anchor"></a>Commands</h2>
<p>Load the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(qualtRics)</code></pre></div>
<p>Register your Qualtrics credentials if required:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/qualtrics_register_options.html">registerOptions</a></span>(<span class="dt">api_token=</span><span class="st">"&lt;YOUR-API-TOKEN&gt;"</span>, <span class="dt">root_url=</span><span class="st">"&lt;YOUR-ROOT-URL&gt;"</span>)</code></pre></div>
<p>Get a data frame of surveys:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">surveys &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_surveys.html">getSurveys</a></span>() </code></pre></div>
<p>Export a survey and load it into R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mysurvey &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_survey.html">getSurvey</a></span>(<span class="dt">surveyID =</span> surveys<span class="op">$</span>id[<span class="dv">6</span>], 
                      <span class="dt">verbose =</span> <span class="ot">TRUE</span>) <span class="co"># You can set this option globally</span>
                                      <span class="co"># or pass it to the function.</span></code></pre></div>
<p>You can add a from/to date to only retrieve responses between those dates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">surv &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_survey.html">getSurvey</a></span>(survs<span class="op">$</span>id[<span class="dv">4</span>],
                  <span class="dt">startDate =</span> <span class="st">"2016-09-18"</span>,
                  <span class="dt">endDate =</span> <span class="st">"2016-10-01"</span>,
                  <span class="dt">useLabels =</span> <span class="ot">FALSE</span>) <span class="co"># You can set this option </span>
                                     <span class="co"># globally or pass it to this</span>
                                     <span class="co"># function.</span></code></pre></div>
<p>Note that your date and time settings may not correspond to your own timezone. You can find out how to do this <a href="https://www.qualtrics.com/support/survey-platform/getting-started/managing-your-account/#user-settings">here</a>. See <a href="https://api.qualtrics.com/docs/dates-and-times">this page</a> for more information about how Qualtrics handles dates and times. <strong>Keep in mind that this is important if you plan on using times / dates as cut-off points to filter data</strong>.</p>
<p>You may also reference a response ID. <code>getSurvey</code> will then download all responses that were submitted after that response:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">surv &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_survey.html">getSurvey</a></span>(survs<span class="op">$</span>id[<span class="dv">4</span>],
                  <span class="dt">lastResponseId =</span> <span class="st">"R_3mmovCIeMllvsER"</span>,
                  <span class="dt">useLabels =</span> <span class="ot">FALSE</span>,
                  <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You can filter a survey for specific questions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve questions for a survey</span>
questions &lt;-<span class="st"> </span><span class="kw"><a href="../reference/getSurveyQuestions.html">getSurveyQuestions</a></span>(<span class="dt">surveyID =</span> surveys<span class="op">$</span>id[<span class="dv">6</span>])
<span class="co"># Retrieve a single survey, filtering for questions I want.</span>
mysurvey &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_survey.html">getSurvey</a></span>(<span class="dt">surveyID =</span> surveys<span class="op">$</span>id[<span class="dv">6</span>],
                      <span class="dt">save_dir =</span> <span class="kw">tempdir</span>(),
                      <span class="dt">includedQuestionIds =</span> <span class="kw">c</span>(<span class="st">"QID1"</span>, <span class="st">"QID2"</span>, <span class="st">"QID3"</span>),
                      <span class="dt">verbose=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>Note that dates are converted without a specific timezone in mind. You can specify your own timezone using <a href="https://www.qualtrics.com/support/survey-platform/getting-started/managing-your-account/">these instructions</a>.</p>
<p>You can store the results in a specific location if you like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mysurvey &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_get_survey.html">getSurvey</a></span>(<span class="dt">surveyID =</span> surveys<span class="op">$</span>id[<span class="dv">6</span>], 
                      <span class="dt">save_dir =</span> <span class="st">"/users/jasper/desktop/"</span>, 
                      <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Note that surveys that are stored in this way will be saved as an <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/readRDS.html">RDS</a> file rather than e.g. a CSV. Reading an RDS file is as straightforward as this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mysurvey &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="dt">file =</span> <span class="st">"/users/jasper/desktop/mysurvey.rds"</span>)</code></pre></div>
<p>You can read a survey that you downloaded manually using <code>readSurvey</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mysurvey &lt;-<span class="st"> </span><span class="kw"><a href="../reference/qualtrics_read_survey.html">readSurvey</a></span>(<span class="st">"/users/jasper/desktop/mysurvey.csv"</span>)</code></pre></div>
<p>To avoid special characters (mainly periods) in header names, <code>readSurvey</code> uses question labels as the header names. The question belonging to that label is then added using the <a href="https://CRAN.R-project.org/package=sjlabelled">sjlabelled</a> package. Qualtrics gives names to these labels automatically, but you can easily change them.</p>
<p><img src="https://raw.githubusercontent.com/ropensci/qualtRics/master/img/qualtricsdf.png" width="80%"></p>
<p>You can edit your configuration file by executing <code>file.edit(".qualtRics.yml")</code> in the R console.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#usage">Usage</a></li>
      <li><a href="#registering-your-qualtrics-credentials">Registering your Qualtrics credentials</a></li>
      <li><a href="#commands">Commands</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jasper Ginn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
